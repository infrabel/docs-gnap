<!DOCTYPE html>
<html lang="en" ng-app="docs">
    <head>
  <meta charset="utf-8" />
  <title>Validating user input - GNaP</title>

  <meta name="description" content="" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="/node_modules/gnap-theme-gnap-angular/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="/node_modules/gnap-theme-gnap-angular/css/font-awesome.min.css" />

  <!--[if IE 7]>
  <link rel="stylesheet" href="/node_modules/gnap-theme-gnap-angular/css/font-awesome-ie7.min.css" />
  <![endif]-->

  <link rel="stylesheet" href="/node_modules/gnap-theme-gnap-angular/css/ace-fonts.min.css" />
  <link rel="stylesheet" href="/node_modules/gnap-theme-gnap-angular/css/ace.min.css" />
  <link rel="stylesheet" href="/node_modules/gnap-theme-gnap-angular/css/ace-skins.min.css" />
  <link rel="stylesheet" href="/node_modules/gnap-theme-gnap-angular/css/print.min.css" media="print" />

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="/node_modules/gnap-theme-gnap-angular/css/ace-ie.min.css" />
  <link rel="stylesheet" href="/node_modules/gnap-theme-gnap-angular/css/ie8.min.css" />
  <![endif]-->

  <!--[if lt IE 9]>
  <script src="/node_modules/gnap-theme-gnap-angular/js/html5shiv.min.js"></script>
  <script src="/node_modules/gnap-theme-gnap-angular/js/respond.min.js"></script>
  <![endif]-->

  <link rel="stylesheet" href="/node_modules/gnap-theme-gnap-angular/css/ie9.min.css" />

  <link rel="stylesheet" href="/css/jekyll-syntax/default.css" />
  <link rel="stylesheet" href="/css/common.css" />
  <link rel="stylesheet" href="/css/docs.css" />

  <script src="/node_modules/gnap-theme-gnap-angular/js/modernizr.min.js"></script>

  <link href="/images/favicon.ico" rel="shortcut icon" type="image/x-icon" />
</head>


    <body>
        <div class="navbar navbar-default" id="navbar">
    <div class="navbar-container" id="navbar-container">
        <div class="navbar-header pull-left">
            <a href="/" class="navbar-brand">
                <small>
                    <i class="team-logo"></i>

                    <!-- GNaP -->
                </small>
            </a>
        </div>
        
        <div class="navbar-header pull-right" role="navigation">
            <ul class="nav ace-nav">
                <li><a href="/docs"><i class="icon-file"></i>Documentation</a></li>
                <li><a href="/"><i class="icon-youtube-play"></i> Videos</a></li>
                <li><a href="/releases"><i class="icon-tags"></i>Releases</a></li>
                <li><a href="/gnap/update/2014/12/09/introducing-gnap/"><i class="icon-file"></i>Blog</a></li>
                <li><a href="https://www.github.com/infrabel" target="_blank"><i class="icon-github"></i> GitHub</a></li>
            </ul>
        </div>
    </div>
</div>


        <div class="main-container" id="main-container">
            <div class="main-container-inner">
                <a class="menu-toggler" id="menu-toggler" href="#">
                    <span class="menu-text"></span>
                </a>
                <div class="sidebar" id="sidebar">
                    <ul class="nav nav-list">
    <li class="">
        <a href="/docs">
            <i class="icon-bolt"></i>
            <span class="menu-text"> Getting Started</span>
        </a>
    </li>
    <li class="">
        <a href="/docs/application-structure">
            <i class="icon-tasks"></i>
            <span class="menu-text"> Application structure</span>
        </a>
    </li>
    <li class="">
        <a href="/docs/configuring-your-application">
            <i class="icon-gears"></i>
            <span class="menu-text"> Configuring your application</span>
        </a>
    </li>
    <li class="">
        <a href="/docs/states-controllers-views">
            <i class="icon-compass"></i>
            <span class="menu-text"> States, controllers &amp; views</span>
        </a>
    </li>
    <li class="">
        <a href="/docs/working-with-a-rest-api">
            <i class="icon-code"></i>
            <span class="menu-text"> Working with a REST API</span>
        </a>
    </li>
    <li class="">
        <a href="/docs/authenticating-using-a-jwt-token">
            <i class="icon-lock"></i>
            <span class="menu-text"> Authenticating using a JWT token</span>
        </a>
    </li>
    <li class="">
        <a href="/docs/internationalization">
            <i class="icon-globe"></i>
            <span class="menu-text"> Internationalization (I18n)</span>
        </a>
    </li>
    <li class="active">
        <a href="/docs/validating-user-input">
            <i class="icon-check"></i>
            <span class="menu-text"> Validating user input</span>
        </a>
    </li>
    <li class="">
        <a href="/docs/error-handling">
            <i class="icon-warning-sign"></i>
            <span class="menu-text"> Error handling</span>
        </a>
    </li>
    <li class="">
        <a href="/docs/putting-your-application-in-production">
            <i class="icon-flag-checkered"></i>
            <span class="menu-text"> Putting your application in production</span>
        </a>
    </li>
    <li class="">
        <a href="/docs/troubleshooting-your-application">
            <i class="icon-terminal"></i>
            <span class="menu-text"> Troubleshooting your application</span>
        </a>
    </li>
</ul>

                </div>

                <div class="main-content">
                    <div class="breadcrumbs" id="breadcrumbs">
                        <ul class="breadcrumb">
                            <li>
                                <i class="icon-home home-icon"></i>
                                <a href="/">Home</a>
                            </li>
                            <li><a href="/docs">Documentation</a></lI>

                            <li class="active">Validating user input</li>
                        </ul>
                    </div>

                    <div class="page-content" ng-controller="TopicController" ng-cloak>
                        <div class="row">
                            <div class="col-xs-12">                             
                                <div class="page-header clearfix">
                                    <h1 class="pull-left">Validating user input</h1>
                                    <!--
                                    <div class="btn-group pull-right">
                                        <label class="btn btn-primary" ng-model="platform" btn-radio="'.NET'">.NET</label>
                                        <label class="btn btn-primary" ng-model="platform" btn-radio="'Java'">Java</label>
                                        <label class="btn btn-primary" ng-model="platform" btn-radio="'PHP'">PHP</label>
                                    </div>
                                    -->
                                </div>
                                <div class="alert alert-warning" platform="Java">
                                    <i class="icon-warning-sign"></i> We currently do not offer a server-side implementation for Java.
                                </div>
                                <div class="alert alert-warning" platform="PHP">
                                    <i class="icon-warning-sign"></i> We currently do not offer a server-side implementation for PHP.
                                </div>
                                <p>themes-gnap comes with a set of validation helpers to make validating user input easier.</p>

<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;form</span> <span class="na">gnap-submit=</span><span class="s">&#39;vm.save()&#39;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">gnap-show-validity</span> <span class="na">for=</span><span class="s">&quot;firstName&quot;</span> <span class="na">class=</span><span class="s">&quot;form-group&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">&quot;control-label&quot;</span> <span class="na">for=</span><span class="s">&quot;firstName&quot;</span><span class="nt">&gt;</span>First Name<span class="nt">&lt;/label&gt;</span>
        <span class="nt">&lt;input</span> <span class="na">ng-model=</span><span class="s">&quot;vm.firstName&quot;</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">class=</span><span class="s">&quot;form-control&quot;</span> <span class="na">id=</span><span class="s">&quot;firstName&quot;</span> <span class="na">name=</span><span class="s">&quot;firstName&quot;</span> <span class="na">required</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">gnap-validation-messages</span> <span class="na">for=</span><span class="s">&quot;firstName&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">gnap-validation-message</span> <span class="na">when=</span><span class="s">&quot;required&quot;</span><span class="nt">&gt;</span>Enter the first name<span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;button</span> <span class="na">class=</span><span class="s">&quot;btn btn-primary&quot;</span><span class="nt">&gt;</span>Save<span class="nt">&lt;/button&gt;</span>
<span class="nt">&lt;/form&gt;</span></code></pre></div>

<h3 id="gnap-submit">gnap-submit</h3>

<p>The <a href="https://github.com/infrabel/themes-gnap/blob/master/custom/gnap-angular/js/develop/gnap/submit.directive.js">gnap-submit</a> directive invokes its assigned function only when the form is in a valid state. It also keeps track of asynchronous validation methods and lets them finish before submitting the form.</p>

<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;form</span> <span class="na">gnap-submit=</span><span class="s">&#39;vm.save()&#39;</span><span class="nt">&gt;</span>
    ...
<span class="nt">&lt;/form&gt;</span></code></pre></div>

<h3 id="gnap-show-validity">gnap-show-validity</h3>

<p><a href="https://github.com/infrabel/themes-gnap/blob/master/custom/gnap-angular/js/develop/gnap/show-validity.directive.js">gnap-show-validity</a> applies <a href="http://getbootstrap.com/css/#forms-control-validation">Bootstrap 3 validation states</a> styling for invalid input fields. If the form field specified by <code>for</code> is in an invalid state then it will add the <code>has-errors</code> class to the div it is declared on.</p>

<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;div</span> <span class="na">gnap-show-validity</span> <span class="na">for=</span><span class="s">&quot;firstName&quot;</span> <span class="na">class=</span><span class="s">&quot;form-group&quot;</span><span class="nt">&gt;</span>
    ...
<span class="nt">&lt;/div&gt;</span></code></pre></div>

<h3 id="gnap-validation-messages">gnap-validation-messages</h3>

<p><a href="https://github.com/infrabel/themes-gnap/blob/master/custom/gnap-angular/js/develop/gnap/validation-messages.directive.js">gnap-validation-messages</a> is a container for displaying validation messages for the form field specified by <code>for</code>. Embed one or more <a href="https://github.com/infrabel/themes-gnap/blob/master/custom/gnap-angular/js/develop/gnap/validation-message.directive.js">gnap-validation-message</a> directives for each of the validation errors you want to show. Each <a href="https://github.com/infrabel/themes-gnap/blob/master/custom/gnap-angular/js/develop/gnap/validation-message.directive.js">gnap-validation-message</a> directive must declare a <code>when</code> attribute that specifies the validation that is violated.</p>

<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;div</span> <span class="na">gnap-validation-messages</span> <span class="na">for=</span><span class="s">&quot;firstName&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">gnap-validation-message</span> <span class="na">when=</span><span class="s">&quot;required&quot;</span><span class="nt">&gt;</span>Enter the first name<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span></code></pre></div>

<h3 id="gnap-validate">gnap-validate</h3>

<p>Sometimes you need to do some validation that is not supported by the AngularJS built-in validation directives. Generally speaking you would then create your own validation directive. For an example of how to do this <a href="http://weblogs.asp.net/dwahlin/building-a-custom-angularjs-unique-value-directive">check out this blog post</a>. This however involves a lot of work.</p>

<p>themes-gnap comes with a <a href="https://github.com/infrabel/themes-gnap/blob/master/custom/gnap-angular/js/develop/gnap/validate.directive.js">gnap-validate</a> directive that you can configure with a custom validation function. This function is defined on the scope and can either return a boolean value or a promise.</p>

<p>If a promise is returned then a loader icon will be displayed in the input field to indicate that validation is being performed. The form cannot be submitted by the user at this point as we don’t yet know if the user input is valid.</p>

<p>Start by adding the <code>gnap-validate</code> attribute to your HTML input field. In the following example we’re telling gnap-validate to call our `vm.validateUsername’ function when the field needs to be validated.</p>

<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;div</span> <span class="na">gnap-show-validity</span> <span class="na">for=</span><span class="s">&quot;username&quot;</span> <span class="na">class=</span><span class="s">&quot;form-group&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">&quot;control-label&quot;</span> <span class="na">for=</span><span class="s">&quot;username&quot;</span><span class="nt">&gt;</span>Username<span class="nt">&lt;/label&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">ng-model=</span><span class="s">&quot;vm.username&quot;</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">class=</span><span class="s">&quot;form-control&quot;</span> <span class="na">id=</span><span class="s">&quot;username&quot;</span> <span class="na">name=</span><span class="s">&quot;username&quot;</span> <span class="na">gnap-validate=</span><span class="s">&quot;vm.validateUsername()&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">gnap-validation-messages</span> <span class="na">for=</span><span class="s">&quot;username&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">gnap-validation-message</span> <span class="na">when=</span><span class="s">&quot;unique&quot;</span><span class="nt">&gt;</span>The username entered is not unique<span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span></code></pre></div>

<p>The <code>validateUsername</code> function needs to return a JSON object with a property for each of the validation rules that were processed. In this case we’re only checking the uniqueness of the username so our object only contains a <code>unique</code> property.</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="s1">&#39;use strict&#39;</span><span class="p">;</span>

<span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">angular</span>
        <span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">&#39;my-app&#39;</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">&#39;gnap-validation&#39;</span><span class="p">,</span> <span class="nx">MyController</span><span class="p">);</span>

    <span class="nx">MyController</span><span class="p">.</span><span class="nx">$inject</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;$q&#39;</span><span class="p">];</span>

    <span class="kd">function</span> <span class="nx">MyController</span><span class="p">(</span><span class="nx">$q</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">vm</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

        <span class="p">...</span>

        <span class="nx">vm</span><span class="p">.</span><span class="nx">validateUsername</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">angular</span><span class="p">.</span><span class="nx">isUndefined</span><span class="p">(</span><span class="nx">vm</span><span class="p">.</span><span class="nx">username</span><span class="p">))</span> <span class="p">{</span>
                <span class="k">return</span> <span class="p">{</span>
                    <span class="nx">unique</span><span class="o">:</span> <span class="kc">true</span>
                <span class="p">};</span>
            <span class="p">}</span>

            <span class="kd">var</span> <span class="nx">uniqueDeferred</span> <span class="o">=</span> <span class="nx">$q</span><span class="p">.</span><span class="nx">defer</span><span class="p">();</span>

            <span class="c1">// simulate remote call</span>
            <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">vm</span><span class="p">.</span><span class="nx">username</span> <span class="o">===</span> <span class="s1">&#39;test&#39;</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">uniqueDeferred</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="nx">uniqueDeferred</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">},</span> <span class="mi">2500</span><span class="p">);</span>

            <span class="k">return</span> <span class="p">{</span>
                <span class="nx">unique</span><span class="o">:</span> <span class="nx">uniqueDeferred</span><span class="p">.</span><span class="nx">promise</span>
            <span class="p">};</span>
        <span class="p">};</span>
    <span class="p">}</span>
<span class="p">})();</span></code></pre></div>

<p>In the above example we’re simulating an asynchronous action such as calling a remote REST API. We’re doing this by building a promise ourselves and resolving it to true if username contains ‘test’. For more information about working with promises <a href="https://code.angularjs.org/1.2.27/docs/api/ng/service/$q">see the AngularJS $q documentation</a>.</p>

<p>A validation message can be shown by adding a gnap-validation-message directive. In our example we added a gnap-validation-message with a <code>when</code> attribute value of <code>unique</code> which corresponds to the unique property of the JSON object returned by our custom validation function.</p>

                                
                                    <nav>
                                        <ul class="pager">
                                            <li class="next"><a href="/docs/error-handling">Next: Error handling <span aria-hidden="true">&rarr;</span></a></li>
                                        </ul>
                                    </nav>
                                
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script type="text/javascript">
            window.jQuery || document.write("<script src='/node_modules/gnap-theme-gnap-angular/js/jquery.min.js'>"+"<"+"/script>");
        </script>
        <script type="text/javascript">
            if("ontouchend" in document) document.write("<script src='/node_modules/gnap-theme-gnap-angular/js/jquery.mobile.custom.min.js'>"+"<"+"/script>");
        </script>
        <script src="/node_modules/gnap-theme-gnap-angular/js/bootstrap.min.js"></script>
        <script src="/node_modules/gnap-theme-gnap-angular/js/ace-elements.min.js"></script>
        <script src="/node_modules/gnap-theme-gnap-angular/js/ace.min.js"></script>
        <script src="/node_modules/gnap-theme-gnap-angular/js/layout.min.js"></script>
        <script src="/node_modules/gnap-theme-gnap-angular/js/angular/angular.min.js"></script>
        <script src="/node_modules/gnap-theme-gnap-angular/js/angular/angular-resource.min.js"></script>
        <script src="/node_modules/gnap-theme-gnap-angular/js/angular-local-storage/angular-local-storage.min.js"></script>
        <script src="/node_modules/gnap-theme-gnap-angular/js/ui-bootstrap/ui-bootstrap-tpls-0.11.0.min.js"></script>

        <script src="/js/app/docs/app.modules.js"></script>
        <script src="/js/app/docs/app.config.js"></script>
        <script src="/js/app/docs/topic.controller.js"></script>
        <script src="/js/app/docs/platform.directive.js"></script>
    </body>
</html>
