<!DOCTYPE html>
<html lang="en" ng-app="docs">
    <head>
  <meta charset="utf-8" />
  <title>Authenticating using a JWT token - GNaP</title>

  <meta name="description" content="" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="/node_modules/gnap-theme-gnap-angular/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="/node_modules/gnap-theme-gnap-angular/css/font-awesome.min.css" />

  <!--[if IE 7]>
  <link rel="stylesheet" href="/node_modules/gnap-theme-gnap-angular/css/font-awesome-ie7.min.css" />
  <![endif]-->

  <link rel="stylesheet" href="/node_modules/gnap-theme-gnap-angular/css/ace-fonts.min.css" />
  <link rel="stylesheet" href="/node_modules/gnap-theme-gnap-angular/css/ace.min.css" />
  <link rel="stylesheet" href="/node_modules/gnap-theme-gnap-angular/css/ace-skins.min.css" />
  <link rel="stylesheet" href="/node_modules/gnap-theme-gnap-angular/css/print.min.css" media="print" />

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="/node_modules/gnap-theme-gnap-angular/css/ace-ie.min.css" />
  <link rel="stylesheet" href="/node_modules/gnap-theme-gnap-angular/css/ie8.min.css" />
  <![endif]-->

  <!--[if lt IE 9]>
  <script src="/node_modules/gnap-theme-gnap-angular/js/html5shiv.min.js"></script>
  <script src="/node_modules/gnap-theme-gnap-angular/js/respond.min.js"></script>
  <![endif]-->

  <link rel="stylesheet" href="/node_modules/gnap-theme-gnap-angular/css/ie9.min.css" />

  <link rel="stylesheet" href="/css/jekyll-syntax/default.css" />
  <link rel="stylesheet" href="/css/common.css" />
  <link rel="stylesheet" href="/css/docs.css" />

  <script src="/node_modules/gnap-theme-gnap-angular/js/modernizr.min.js"></script>

  <link href="/images/favicon.ico" rel="shortcut icon" type="image/x-icon" />
</head>


    <body>
        <div class="navbar navbar-default" id="navbar">
    <div class="navbar-container" id="navbar-container">
        <div class="navbar-header pull-left">
            <a href="/" class="navbar-brand">
                <small>
                    <i class="team-logo"></i>

                    <!-- GNaP -->
                </small>
            </a>
        </div>
        
        <div class="navbar-header pull-right" role="navigation">
            <ul class="nav ace-nav">
                <li><a href="/docs"><i class="icon-file"></i>Documentation</a></li>
                <li><a href="/"><i class="icon-youtube-play"></i> Videos</a></li>
                <li><a href="/releases"><i class="icon-tags"></i>Releases</a></li>
                <li><a href="/gnap/update/2014/12/09/introducing-gnap/"><i class="icon-file"></i>Blog</a></li>
                <li><a href="https://www.github.com/infrabel" target="_blank"><i class="icon-github"></i> GitHub</a></li>
            </ul>
        </div>
    </div>
</div>


        <div class="main-container" id="main-container">
            <div class="main-container-inner">
                <a class="menu-toggler" id="menu-toggler" href="#">
                    <span class="menu-text"></span>
                </a>
                <div class="sidebar" id="sidebar">
                    <ul class="nav nav-list">
    <li class="">
        <a href="/docs">
            <i class="icon-bolt"></i>
            <span class="menu-text"> Getting Started</span>
        </a>
    </li>
    <li class="">
        <a href="/docs/application-structure">
            <i class="icon-tasks"></i>
            <span class="menu-text"> Application structure</span>
        </a>
    </li>
    <li class="">
        <a href="/docs/configuring-your-application">
            <i class="icon-gears"></i>
            <span class="menu-text"> Configuring your application</span>
        </a>
    </li>
    <li class="">
        <a href="/docs/states-controllers-views">
            <i class="icon-compass"></i>
            <span class="menu-text"> States, controllers &amp; views</span>
        </a>
    </li>
    <li class="">
        <a href="/docs/working-with-a-rest-api">
            <i class="icon-code"></i>
            <span class="menu-text"> Working with a REST API</span>
        </a>
    </li>
    <li class="active">
        <a href="/docs/authenticating-using-a-jwt-token">
            <i class="icon-lock"></i>
            <span class="menu-text"> Authenticating using a JWT token</span>
        </a>
    </li>
    <li class="">
        <a href="/docs/internationalization">
            <i class="icon-globe"></i>
            <span class="menu-text"> Internationalization (I18n)</span>
        </a>
    </li>
    <li class="">
        <a href="/docs/validating-user-input">
            <i class="icon-check"></i>
            <span class="menu-text"> Validating user input</span>
        </a>
    </li>
    <li class="">
        <a href="/docs/error-handling">
            <i class="icon-warning-sign"></i>
            <span class="menu-text"> Error handling</span>
        </a>
    </li>
    <li class="">
        <a href="/docs/putting-your-application-in-production">
            <i class="icon-flag-checkered"></i>
            <span class="menu-text"> Putting your application in production</span>
        </a>
    </li>
    <li class="">
        <a href="/docs/troubleshooting-your-application">
            <i class="icon-terminal"></i>
            <span class="menu-text"> Troubleshooting your application</span>
        </a>
    </li>
</ul>

                </div>

                <div class="main-content">
                    <div class="breadcrumbs" id="breadcrumbs">
                        <ul class="breadcrumb">
                            <li>
                                <i class="icon-home home-icon"></i>
                                <a href="/">Home</a>
                            </li>
                            <li><a href="/docs">Documentation</a></lI>

                            <li class="active">Authenticating using a JWT token</li>
                        </ul>
                    </div>

                    <div class="page-content" ng-controller="TopicController" ng-cloak>
                        <div class="row">
                            <div class="col-xs-12">                             
                                <div class="page-header clearfix">
                                    <h1 class="pull-left">Authenticating using a JWT token</h1>
                                    <!--
                                    <div class="btn-group pull-right">
                                        <label class="btn btn-primary" ng-model="platform" btn-radio="'.NET'">.NET</label>
                                        <label class="btn btn-primary" ng-model="platform" btn-radio="'Java'">Java</label>
                                        <label class="btn btn-primary" ng-model="platform" btn-radio="'PHP'">PHP</label>
                                    </div>
                                    -->
                                </div>
                                <div class="alert alert-warning" platform="Java">
                                    <i class="icon-warning-sign"></i> We currently do not offer a server-side implementation for Java.
                                </div>
                                <div class="alert alert-warning" platform="PHP">
                                    <i class="icon-warning-sign"></i> We currently do not offer a server-side implementation for PHP.
                                </div>
                                <p>themes-gnap has built-in support for authenticating using a JWT token.</p>

<blockquote>
  <p>JSON Web Token (JWT) is a compact URL-safe means of representing claims to be transferred between two parties. The claims in a JWT are encoded as a JSON object that is digitally signed using JSON Web Signature (JWS) - <a href="http://tools.ietf.org/html/draft-ietf-oauth-json-web-token">IETF</a></p>
</blockquote>

<p>The scaffolder has generated a folder named app/public/login that contains a login state, controller and view template. The controllers default behavior is to perform a post on a REST service at /tokens with a username and password value. The REST service should return a JSON formatted response that contains a token.</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="p">{</span>
    <span class="nx">token</span><span class="o">:</span> <span class="s1">&#39;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEyMzQ1Njc4OTAsIm5hbWUiOiJKb2huIERvZSIsImFkbWluIjp0cnVlfQ.eoaDVGTClRdfxUZXiPs3f8FmJDkDE_VCQFXqKxpLsts&#39;</span>
<span class="p">}</span></code></pre></div>

<blockquote>
  <p>TIP: A usefull tool for inspecting JWT tokens is <a href="http://jwt.io">jwt.io</a></p>
</blockquote>

<p>This token is then passed to the <a href="https://github.com/infrabel/themes-gnap/blob/master/custom/gnap-angular/js/develop/gnap/session.service.js">session service</a> to initiate a session for the current user.</p>

<h2 id="getting-information-about-the-current-user">Getting information about the current user</h2>

<p>Information about the current user can be obtained from the <a href="https://github.com/infrabel/themes-gnap/blob/master/custom/gnap-angular/js/develop/gnap/session.service.js">session service</a> through the <code>user</code> property. This object has the following standard properties:</p>

<table class="table">
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>username</td>
      <td>The username. Maps to the <code>unique_name</code> claim.</td>
    </tr>
    <tr>
      <td>name</td>
      <td>The full user name. Concatenation of the <code>given_name</code> and <code>family_name</code> claim.</td>
    </tr>
  </tbody>
</table>

<p>Other claims found in the JWT token are added as properties of the user object.</p>

<h2 id="making-authenticated-rest-api-calls">Making authenticated REST API calls</h2>

<p>As soon as the session service has received the JWT token, all request will include the JWT token. The token is sent as a bearer token in the authentication header. Adding this header to the request is done by the <a href="https://github.com/infrabel/themes-gnap/blob/master/custom/gnap-angular/js/develop/gnap/authentication.interceptor.js">authentication interceptor</a>.</p>

<p>The receiving REST API must validate the token and return a 401 - Unauthorized if the token is missing. Or a 403 - Forbidden if the current user is not allowed to access the resource with the JWT token.</p>

                                
                                    <nav>
                                        <ul class="pager">
                                            <li class="next"><a href="/docs/internationalization">Next: Internationalization (I18n) <span aria-hidden="true">&rarr;</span></a></li>
                                        </ul>
                                    </nav>
                                
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script type="text/javascript">
            window.jQuery || document.write("<script src='/node_modules/gnap-theme-gnap-angular/js/jquery.min.js'>"+"<"+"/script>");
        </script>
        <script type="text/javascript">
            if("ontouchend" in document) document.write("<script src='/node_modules/gnap-theme-gnap-angular/js/jquery.mobile.custom.min.js'>"+"<"+"/script>");
        </script>
        <script src="/node_modules/gnap-theme-gnap-angular/js/bootstrap.min.js"></script>
        <script src="/node_modules/gnap-theme-gnap-angular/js/ace-elements.min.js"></script>
        <script src="/node_modules/gnap-theme-gnap-angular/js/ace.min.js"></script>
        <script src="/node_modules/gnap-theme-gnap-angular/js/layout.min.js"></script>
        <script src="/node_modules/gnap-theme-gnap-angular/js/angular/angular.min.js"></script>
        <script src="/node_modules/gnap-theme-gnap-angular/js/angular/angular-resource.min.js"></script>
        <script src="/node_modules/gnap-theme-gnap-angular/js/angular-local-storage/angular-local-storage.min.js"></script>
        <script src="/node_modules/gnap-theme-gnap-angular/js/ui-bootstrap/ui-bootstrap-tpls-0.11.0.min.js"></script>

        <script src="/js/app/docs/app.modules.js"></script>
        <script src="/js/app/docs/app.config.js"></script>
        <script src="/js/app/docs/topic.controller.js"></script>
        <script src="/js/app/docs/platform.directive.js"></script>
    </body>
</html>
